{
  "version": 2,
  "timestamp": "2026-02-28T03:42:10Z",
  "connections": {
    "default": "mysql"
  },
  "changes": [
    {
      "action": "option_changed",
      "schema": "Admin"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "currency"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "metadata"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "phone"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "settings"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "address"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "code"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "email"
    },
    {
      "action": "property_added",
      "schema": "Branch",
      "property": "locale"
    },
    {
      "action": "property_added",
      "schema": "Organization",
      "property": "settings"
    },
    {
      "action": "property_added",
      "schema": "Organization",
      "property": "allowed_ips"
    },
    {
      "action": "property_added",
      "schema": "Organization",
      "property": "suspended_at"
    },
    {
      "action": "property_added",
      "schema": "Organization",
      "property": "terminated_at"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "is_active"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "date_of_birth"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "bio"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "email_verified_at"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "phone"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "address"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "bank"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "is_default_password"
    },
    {
      "action": "property_added",
      "schema": "User",
      "property": "avatar_url"
    }
  ],
  "snapshot": {
    "Admin": {
      "name": "Admin",
      "kind": "object",
      "displayName": "Admin",
      "properties": {
        "email": {
          "type": "String",
          "displayName": "Email"
        },
        "email_verified_at": {
          "type": "Timestamp",
          "displayName": "Email Verified At",
          "nullable": true
        },
        "is_active": {
          "type": "Boolean",
          "displayName": "Active",
          "default": true
        },
        "name": {
          "type": "String",
          "displayName": "Name"
        },
        "password": {
          "type": "String",
          "displayName": "Password",
          "hidden": true
        },
        "remember_token": {
          "type": "String",
          "displayName": "Remember Token",
          "nullable": true,
          "length": 100,
          "hidden": true
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "indexes": [
          {
            "columns": [
              "email"
            ],
            "unique": true
          }
        ],
        "authenticatable": true
      }
    },
    "Branch": {
      "name": "Branch",
      "kind": "object",
      "displayName": "Branch",
      "properties": {
        "address": {
          "type": "Text",
          "displayName": "Address",
          "nullable": true
        },
        "code": {
          "type": "String",
          "displayName": "Branch Code",
          "description": "Unique code within organization (e.g., HQ, HCM-01, HN-MAIN)",
          "nullable": true,
          "length": 20
        },
        "console_branch_id": {
          "type": "Uuid",
          "displayName": "Console Branch ID",
          "description": "Branch ID from Console",
          "unique": true
        },
        "console_brand_id": {
          "type": "Uuid",
          "displayName": "Console Brand ID",
          "description": "Brand ID from Console (nullable - not all branches have a brand)",
          "nullable": true
        },
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Console Organization ID",
          "description": "Organization ID from Console"
        },
        "currency": {
          "type": "String",
          "displayName": "Currency",
          "description": "ISO 4217 currency code (e.g., VND, USD, JPY)",
          "nullable": true,
          "length": 3
        },
        "email": {
          "type": "String",
          "displayName": "Email",
          "nullable": true
        },
        "is_active": {
          "type": "Boolean",
          "displayName": "Active",
          "default": true
        },
        "is_headquarters": {
          "type": "Boolean",
          "displayName": "Is Headquarters",
          "description": "Whether this is the main headquarters of the organization",
          "default": false
        },
        "is_standalone": {
          "type": "Boolean",
          "displayName": "Standalone",
          "description": "Whether this record was created in standalone mode",
          "default": false
        },
        "locale": {
          "type": "String",
          "displayName": "Locale",
          "description": "Locale code (e.g., vi-VN, en-US, ja-JP)",
          "nullable": true,
          "length": 10
        },
        "metadata": {
          "type": "Json",
          "displayName": "Metadata",
          "description": "Additional data that can be used by external services",
          "nullable": true
        },
        "name": {
          "type": "String",
          "displayName": "Branch Name",
          "length": 100
        },
        "phone": {
          "type": "String",
          "displayName": "Phone",
          "nullable": true,
          "length": 20
        },
        "settings": {
          "type": "Json",
          "displayName": "Settings",
          "nullable": true
        },
        "slug": {
          "type": "String",
          "displayName": "Slug",
          "description": "URL-friendly unique identifier",
          "length": 100
        },
        "timezone": {
          "type": "String",
          "displayName": "Timezone",
          "description": "IANA timezone (e.g. Asia/Tokyo)",
          "nullable": true,
          "length": 50
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_organization_id"
            ]
          },
          {
            "columns": [
              "console_organization_id",
              "slug"
            ],
            "unique": true
          },
          {
            "columns": [
              "console_organization_id",
              "is_active"
            ]
          },
          {
            "columns": [
              "console_organization_id",
              "is_headquarters"
            ]
          },
          {
            "columns": [
              "console_brand_id"
            ]
          },
          {
            "columns": [
              "is_standalone"
            ]
          }
        ]
      }
    },
    "Brand": {
      "name": "Brand",
      "kind": "object",
      "displayName": "Brand",
      "properties": {
        "console_brand_id": {
          "type": "Uuid",
          "displayName": "Console Brand ID",
          "description": "Brand ID from Console",
          "unique": true
        },
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Console Organization ID",
          "description": "Owning organization ID from Console"
        },
        "cover_image_url": {
          "type": "String",
          "displayName": "Cover Image URL",
          "nullable": true,
          "length": 500
        },
        "description": {
          "type": "Text",
          "displayName": "Description",
          "nullable": true
        },
        "is_active": {
          "type": "Boolean",
          "displayName": "Active",
          "default": true
        },
        "is_standalone": {
          "type": "Boolean",
          "displayName": "Standalone",
          "description": "Whether this record was created in standalone mode",
          "default": false
        },
        "logo_url": {
          "type": "String",
          "displayName": "Logo URL",
          "nullable": true,
          "length": 500
        },
        "metadata": {
          "type": "Json",
          "displayName": "Metadata",
          "nullable": true
        },
        "name": {
          "type": "String",
          "displayName": "Brand Name",
          "length": 100
        },
        "settings": {
          "type": "Json",
          "displayName": "Settings",
          "nullable": true
        },
        "slug": {
          "type": "String",
          "displayName": "Slug",
          "description": "Unique identifier for the brand (e.g. starbucks, kfc)",
          "length": 50
        },
        "website": {
          "type": "String",
          "displayName": "Website",
          "nullable": true,
          "length": 500
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_brand_id"
            ],
            "unique": true
          },
          {
            "columns": [
              "slug"
            ],
            "unique": true
          },
          {
            "columns": [
              "console_organization_id",
              "is_active"
            ]
          },
          {
            "columns": [
              "is_standalone"
            ]
          }
        ]
      }
    },
    "Location": {
      "name": "Location",
      "kind": "object",
      "displayName": "Location",
      "properties": {
        "address": {
          "type": "Text",
          "displayName": "Address",
          "nullable": true
        },
        "capacity": {
          "type": "Int",
          "displayName": "Capacity",
          "nullable": true
        },
        "city": {
          "type": "String",
          "displayName": "City",
          "nullable": true,
          "length": 100
        },
        "code": {
          "type": "String",
          "displayName": "Location Code",
          "description": "Unique code within branch (e.g., MAIN-OFFICE, WH-01)",
          "length": 30
        },
        "console_branch_id": {
          "type": "Uuid",
          "displayName": "Console Branch ID"
        },
        "console_location_id": {
          "type": "Uuid",
          "displayName": "Console Location ID",
          "description": "Location ID from Console",
          "unique": true
        },
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Console Organization ID"
        },
        "country_code": {
          "type": "String",
          "displayName": "Country Code",
          "nullable": true,
          "length": 2
        },
        "description": {
          "type": "Text",
          "displayName": "Description",
          "nullable": true
        },
        "email": {
          "type": "Email",
          "displayName": "Email",
          "nullable": true
        },
        "is_active": {
          "type": "Boolean",
          "displayName": "Active",
          "default": true
        },
        "is_standalone": {
          "type": "Boolean",
          "displayName": "Standalone",
          "description": "Whether this record was created in standalone mode",
          "default": false
        },
        "latitude": {
          "type": "Decimal",
          "displayName": "Latitude",
          "nullable": true,
          "precision": 10,
          "scale": 7
        },
        "longitude": {
          "type": "Decimal",
          "displayName": "Longitude",
          "nullable": true,
          "precision": 10,
          "scale": 7
        },
        "metadata": {
          "type": "Json",
          "displayName": "Metadata",
          "nullable": true
        },
        "name": {
          "type": "String",
          "displayName": "Location Name",
          "length": 150
        },
        "phone": {
          "type": "String",
          "displayName": "Phone",
          "nullable": true,
          "length": 20
        },
        "postal_code": {
          "type": "String",
          "displayName": "Postal Code",
          "nullable": true,
          "length": 20
        },
        "settings": {
          "type": "Json",
          "displayName": "Settings",
          "nullable": true
        },
        "sort_order": {
          "type": "Int",
          "displayName": "Sort Order",
          "default": 0
        },
        "state_province": {
          "type": "String",
          "displayName": "State/Province",
          "nullable": true,
          "length": 100
        },
        "timezone": {
          "type": "String",
          "displayName": "Timezone",
          "description": "IANA timezone (inherits from Branch if null)",
          "nullable": true,
          "length": 50
        },
        "type": {
          "type": "Enum",
          "displayName": "Location Type",
          "default": "office",
          "enum": [
            "office",
            "warehouse",
            "factory",
            "store",
            "clinic",
            "restaurant",
            "other"
          ]
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_location_id"
            ],
            "unique": true
          },
          {
            "columns": [
              "console_branch_id",
              "code"
            ],
            "unique": true
          },
          {
            "columns": [
              "console_organization_id",
              "is_active"
            ]
          },
          {
            "columns": [
              "console_branch_id",
              "is_active"
            ]
          },
          {
            "columns": [
              "console_organization_id",
              "type"
            ]
          },
          {
            "columns": [
              "is_standalone"
            ]
          }
        ]
      }
    },
    "Organization": {
      "name": "Organization",
      "kind": "object",
      "displayName": "Organization",
      "properties": {
        "allowed_ips": {
          "type": "Json",
          "displayName": "Allowed IPs",
          "nullable": true
        },
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Console Organization ID",
          "description": "Organization ID from Console",
          "unique": true
        },
        "is_active": {
          "type": "Boolean",
          "displayName": "Active",
          "default": true
        },
        "is_standalone": {
          "type": "Boolean",
          "displayName": "Standalone",
          "description": "Whether this record was created in standalone mode",
          "default": false
        },
        "name": {
          "type": "String",
          "displayName": "Organization Name",
          "length": 100
        },
        "settings": {
          "type": "Json",
          "displayName": "Settings",
          "nullable": true
        },
        "slug": {
          "type": "String",
          "displayName": "Slug",
          "description": "URL-friendly unique identifier",
          "length": 100
        },
        "suspended_at": {
          "type": "Timestamp",
          "displayName": "Suspended At",
          "description": "When organization was suspended (30-day grace period)",
          "nullable": true
        },
        "terminated_at": {
          "type": "Timestamp",
          "displayName": "Terminated At",
          "description": "When organization was terminated (operational data will be deleted after 90 days, but employment history preserved)",
          "nullable": true
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "slug"
            ],
            "unique": true
          },
          {
            "columns": [
              "is_standalone"
            ]
          }
        ]
      }
    },
    "PasswordResetToken": {
      "name": "PasswordResetToken",
      "kind": "object",
      "displayName": "Password Reset Token",
      "properties": {
        "created_at": {
          "type": "Timestamp",
          "displayName": "Created At",
          "nullable": true
        },
        "email": {
          "type": "String",
          "displayName": "Email"
        },
        "token": {
          "type": "String",
          "displayName": "Token"
        }
      },
      "options": {
        "id": false,
        "timestamps": false
      }
    },
    "Permission": {
      "name": "Permission",
      "kind": "object",
      "displayName": "Permission",
      "properties": {
        "group": {
          "type": "String",
          "displayName": "Group",
          "description": "Group name for UI display",
          "nullable": true,
          "length": 50
        },
        "name": {
          "type": "String",
          "displayName": "Permission Name",
          "description": "Human-readable permission name",
          "unique": true,
          "length": 100
        },
        "roles": {
          "type": "Association",
          "displayName": "Roles",
          "relation": "ManyToMany",
          "target": "Role",
          "mappedBy": "permissions",
          "joinTable": "role_permissions"
        },
        "slug": {
          "type": "String",
          "displayName": "Slug",
          "description": "Identifier used in code (e.g., users.create)",
          "unique": true,
          "length": 100
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true
      }
    },
    "RefreshToken": {
      "name": "RefreshToken",
      "kind": "object",
      "displayName": "Refresh Token",
      "properties": {
        "created_at": {
          "type": "Timestamp",
          "displayName": "Created At"
        },
        "expires_at": {
          "type": "Timestamp",
          "displayName": "Expires At"
        },
        "ip_address": {
          "type": "String",
          "displayName": "IP Address",
          "nullable": true,
          "length": 45
        },
        "revoked_at": {
          "type": "Timestamp",
          "displayName": "Revoked At",
          "nullable": true
        },
        "token_hash": {
          "type": "String",
          "displayName": "Token Hash",
          "length": 64
        },
        "user": {
          "type": "Association",
          "displayName": "User",
          "relation": "ManyToOne",
          "target": "User",
          "onDelete": "CASCADE"
        },
        "user_agent": {
          "type": "String",
          "displayName": "User Agent",
          "nullable": true,
          "length": 500
        }
      },
      "options": {
        "timestamps": false,
        "indexes": [
          {
            "columns": [
              "token_hash"
            ]
          },
          {
            "columns": [
              "user"
            ]
          },
          {
            "columns": [
              "expires_at"
            ]
          }
        ]
      }
    },
    "Role": {
      "name": "Role",
      "kind": "object",
      "displayName": "Role",
      "properties": {
        "console_organization_id": {
          "type": "String",
          "displayName": "Organization ID",
          "description": "NULL means global role (system-wide)",
          "nullable": true,
          "length": 36
        },
        "description": {
          "type": "Text",
          "displayName": "Description",
          "nullable": true
        },
        "level": {
          "type": "Int",
          "displayName": "Level",
          "description": "Permission level (higher = more permissions)",
          "default": 0
        },
        "name": {
          "type": "String",
          "displayName": "Role Name",
          "length": 100
        },
        "permissions": {
          "type": "Association",
          "displayName": "Permissions",
          "relation": "ManyToMany",
          "target": "Permission",
          "joinTable": "role_permissions",
          "owning": true
        },
        "slug": {
          "type": "String",
          "displayName": "Slug",
          "description": "Identifier used in URLs and code",
          "length": 100
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_organization_id"
            ]
          },
          {
            "columns": [
              "console_organization_id",
              "name"
            ],
            "unique": true
          },
          {
            "columns": [
              "console_organization_id",
              "slug"
            ],
            "unique": true
          }
        ]
      }
    },
    "RolePermission": {
      "name": "RolePermission",
      "kind": "object",
      "displayName": "Role Permission",
      "properties": {
        "permission": {
          "type": "Association",
          "displayName": "Permission",
          "relation": "ManyToOne",
          "target": "Permission"
        },
        "role": {
          "type": "Association",
          "displayName": "Role",
          "relation": "ManyToOne",
          "target": "Role"
        }
      },
      "options": {
        "id": false,
        "timestamps": true
      }
    },
    "Team": {
      "name": "Team",
      "kind": "object",
      "displayName": "Team",
      "properties": {
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Console Organization ID",
          "description": "Organization ID from Console"
        },
        "console_team_id": {
          "type": "Uuid",
          "displayName": "Console Team ID",
          "description": "Team ID from Console",
          "unique": true
        },
        "name": {
          "type": "String",
          "displayName": "Team Name",
          "length": 100
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_organization_id"
            ]
          }
        ]
      }
    },
    "TeamPermission": {
      "name": "TeamPermission",
      "kind": "object",
      "displayName": "Team Permission",
      "properties": {
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Console Organization ID",
          "description": "Organization ID from Console"
        },
        "console_team_id": {
          "type": "Uuid",
          "displayName": "Console Team ID",
          "description": "Team ID from Console"
        },
        "permission": {
          "type": "Association",
          "displayName": "Permission",
          "description": "Permission directly granted to team",
          "relation": "ManyToOne",
          "target": "Permission"
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_organization_id",
              "console_team_id"
            ]
          }
        ]
      }
    },
    "User": {
      "name": "User",
      "kind": "object",
      "displayName": "User",
      "properties": {
        "address": {
          "type": "Text",
          "displayName": "Address",
          "nullable": true
        },
        "avatar_url": {
          "type": "String",
          "displayName": "Avatar URL",
          "nullable": true,
          "length": 500
        },
        "bank": {
          "type": "Json",
          "displayName": "Bank Account",
          "description": "Bank account information for salary payments (bank_code, branch_code, account_number, account_holder)",
          "nullable": true
        },
        "bio": {
          "type": "Text",
          "displayName": "Bio",
          "nullable": true
        },
        "console_access_token": {
          "type": "Text",
          "displayName": "Console Access Token",
          "description": "Encrypted token for Console API access",
          "nullable": true
        },
        "console_organization_id": {
          "type": "Uuid",
          "displayName": "Organization ID",
          "description": "Primary organization ID the user belongs to (from Console SSO)",
          "nullable": true
        },
        "console_refresh_token": {
          "type": "Text",
          "displayName": "Console Refresh Token",
          "description": "Encrypted refresh token for token renewal",
          "nullable": true
        },
        "console_token_expires_at": {
          "type": "Timestamp",
          "displayName": "Console Token Expiry",
          "description": "Access token expiration time",
          "nullable": true
        },
        "console_user_id": {
          "type": "Uuid",
          "displayName": "Console User ID",
          "description": "User ID from Console SSO",
          "nullable": true
        },
        "date_of_birth": {
          "type": "Date",
          "displayName": "Date of Birth",
          "description": "User's date of birth - portable across organizations",
          "nullable": true
        },
        "email": {
          "type": "String",
          "displayName": "Email",
          "description": "Unique within organization"
        },
        "email_verified_at": {
          "type": "Timestamp",
          "displayName": "Email Verified At",
          "nullable": true
        },
        "google2fa_secret": {
          "type": "String",
          "displayName": "2FA Secret",
          "description": "Base32 secret key for TOTP authentication",
          "nullable": true,
          "length": 100,
          "hidden": true
        },
        "is_active": {
          "type": "Boolean",
          "displayName": "Active",
          "default": true
        },
        "is_default_password": {
          "type": "Boolean",
          "displayName": "Is Default Password",
          "description": "Whether this is a random password from social account login",
          "default": false
        },
        "is_standalone": {
          "type": "Boolean",
          "displayName": "Standalone",
          "description": "Whether this record was created in standalone mode",
          "default": false
        },
        "name": {
          "type": "String",
          "displayName": "Name"
        },
        "password": {
          "type": "String",
          "displayName": "Password",
          "description": "Used in standalone auth mode. Null when using Console SSO.",
          "nullable": true,
          "hidden": true
        },
        "phone": {
          "type": "String",
          "displayName": "Phone Number",
          "nullable": true,
          "length": 20
        },
        "remember_token": {
          "type": "String",
          "displayName": "Remember Token",
          "description": "Browser remember-me token (standalone auth mode)",
          "nullable": true,
          "length": 100,
          "hidden": true
        },
        "roles": {
          "type": "Association",
          "displayName": "Roles",
          "description": "User's roles (multiple allowed, can be scoped to org/branch)",
          "relation": "ManyToMany",
          "target": "Role",
          "owning": true
        },
        "two_factor_confirmed_at": {
          "type": "Timestamp",
          "displayName": "2FA Confirmed At",
          "description": "Timestamp when 2FA was enabled",
          "nullable": true
        },
        "two_factor_recovery_codes": {
          "type": "Text",
          "displayName": "2FA Recovery Codes",
          "description": "Encrypted recovery codes in JSON format",
          "nullable": true,
          "hidden": true
        }
      },
      "options": {
        "id": "Uuid",
        "timestamps": true,
        "softDelete": true,
        "indexes": [
          {
            "columns": [
              "console_organization_id"
            ]
          },
          {
            "columns": [
              "email",
              "console_organization_id"
            ],
            "unique": true
          },
          {
            "columns": [
              "console_user_id",
              "console_organization_id"
            ],
            "unique": true
          },
          {
            "columns": [
              "is_standalone"
            ]
          }
        ],
        "authenticatable": true
      }
    }
  }
}